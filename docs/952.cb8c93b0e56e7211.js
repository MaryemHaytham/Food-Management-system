"use strict";(self.webpackChunkfoodManagementSystem=self.webpackChunkfoodManagementSystem||[]).push([[952],{952:(C,u,a)=>{a.r(u),a.d(u,{RecipesModule:()=>j});var p=a(6814),g=a(1896),d=a(7700),e=a(5879);let R=(()=>{class i{constructor(t,n){this.dialogRef=t,this.data=n}onNoClick(){this.dialogRef.close()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(d.so),e.Y36(d.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-delete-recipe"]],decls:18,vars:2,consts:[[1,"container","py-3"],[1,"text-end","d-block","myPointer",3,"click"],[1,"fa-regular","fa-2x","fa-circle-xmark","text-danger"],[1,"text-center"],["src","../../../assets/images/delete-img.svg","alt","",1,"w-25"],[1,"fw-bold"],[1,"text-end"],[1,"btn","btn-outline-danger",3,"mat-dialog-close"],[1,"me-2"],[1,"fa-solid","fa-trash"]],template:function(n,o){1&n&&(e.TgZ(0,"section",0)(1,"a",1),e.NdJ("click",function(){return o.onNoClick()}),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.TgZ(5,"h3"),e._uU(6,"Delete this Item ( "),e.TgZ(7,"span",5),e._uU(8),e.qZA(),e._uU(9," )?"),e.qZA(),e.TgZ(10,"p"),e._uU(11,"are you sure you want to delete this item ? if you are sure just click on delete"),e.qZA(),e._UZ(12,"hr"),e.qZA(),e.TgZ(13,"div",6)(14,"button",7)(15,"span",8),e._UZ(16,"i",9),e.qZA(),e._uU(17,"Delete"),e.qZA()()()),2&n&&(e.xp6(8),e.Oqu(o.data.name),e.xp6(6),e.Q6J("mat-dialog-close",o.data.id))},dependencies:[d.ZT]})}return i})();var m=a(5552),h=a(1739),y=a(9862);let v=(()=>{class i{constructor(t){this._HttpClient=t}getAllRecipes(t){return this._HttpClient.get("Recipe",{params:t})}onAddRecipe(t){return this._HttpClient.post("Recipe",t)}onDeleteRecipe(t){return this._HttpClient.delete(`Recipe/${t}`)}getRecipeById(t){return this._HttpClient.get(`Recipe/${t}`)}onEditRecipe(t,n){return this._HttpClient.put(`Recipe/${t}`,n)}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(y.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var T=a(2425),_=a(9157),A=a(8525),x=a(3680),r=a(6223),U=a(3365),I=a(2296),f=a(6311),q=a(617);function S(i,c){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function N(i,c){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function J(i,c){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.xp6(1),e.hij("",t.name," , ")}}const D=function(i){return["edit",i]};function F(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",26),e._UZ(4,"img",27),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e.YNc(18,J,2,1,"span",24),e.qZA(),e.TgZ(19,"td")(20,"button",28)(21,"mat-icon",29),e._uU(22,"more_horiz"),e.qZA()(),e.TgZ(23,"mat-menu",null,30)(25,"button",31)(26,"mat-icon",29),e._uU(27,"edit_square"),e.qZA(),e.TgZ(28,"span"),e._uU(29,"Edit"),e.qZA()(),e.TgZ(30,"button",32),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.openDeleteCategoryDialog(s))}),e.TgZ(31,"mat-icon",29),e._uU(32,"delete"),e.qZA(),e.TgZ(33,"span"),e._uU(34,"Delete"),e.qZA()()()()()}if(2&i){const t=c.$implicit,n=e.MAs(24),o=e.oxw(2);e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("src",t.imagePath?o.imagePath+t.imagePath:o.dummyImage,e.LSH),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.price),e.xp6(2),e.Oqu(e.lcZ(11,10,t.creationDate)),e.xp6(3),e.Oqu(e.lcZ(14,12,t.modificationDate)),e.xp6(3),e.Oqu(t.tag.name),e.xp6(2),e.Q6J("ngForOf",t.category),e.xp6(2),e.Q6J("matMenuTriggerFor",n),e.xp6(5),e.Q6J("routerLink",e.VKq(14,D,t.id))}}function w(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"table",22)(2,"thead",23)(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"image"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Description"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Price"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Creation"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Modification"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Tag"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Category"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Actions"),e.qZA()(),e.TgZ(21,"tbody",23),e.YNc(22,F,35,16,"tr",24),e.qZA()(),e.TgZ(23,"mat-paginator",25),e.NdJ("page",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.handlePageEvent(o))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(22),e.Q6J("ngForOf",t.tableData),e.xp6(1),e.Q6J("length",null==t.tableResponse?null:t.tableResponse.totalNumberOfRecords)("pageSize",null==t.tableResponse?null:t.tableResponse.pageSize)("pageSizeOptions",t.pageSizeOptions)("pageIndex",null==t.tableResponse?null:t.tableResponse.pageNumber)}}function z(i,c){1&i&&(e.TgZ(0,"div")(1,"div",23),e._UZ(2,"img",33),e.TgZ(3,"h5"),e._uU(4,"Not Found"),e.qZA()()())}let O=(()=>{class i{constructor(t,n,o,s,l){this._CategoryService=t,this._HelperService=n,this.dialog=o,this._RecipesService=s,this._ToastrService=l,this.tagId=0,this.categoryId=0,this.imagePath="https://upskilling-egypt.com/",this.dummyImage="../../../../assets/images/recipes.jpg",this.searchKey="",this.length=50,this.pageSize=5,this.pageIndex=1,this.pageSizeOptions=[5,10,25],this.tableData=[],this.tags=[],this.categories=[]}ngOnInit(){this.getRecipes(),this.getAllTags(),this.getAllcategories()}searchByName(){}getRecipes(){this._RecipesService.getAllRecipes({pageSize:this.pageSize,pageNumber:this.pageIndex,name:this.searchKey,tagId:this.tagId>0?this.tagId:0,categoryId:this.categoryId}).subscribe({next:n=>{console.log(n.pageSize),this.tableResponse=n,this.tableData=n.data}})}handlePageEvent(t){this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.getRecipes()}openDeleteCategoryDialog(t){console.log(t),this.dialog.open(R,{data:t}).afterClosed().subscribe(o=>{console.log("The dialog was closed"),console.log(o),o&&this.deleteCategory(o)})}deleteCategory(t){this._RecipesService.onDeleteRecipe(t).subscribe({next:n=>{console.log(n)},error:()=>{},complete:()=>{this.getRecipes(),this._ToastrService.info("Deleted Successfuly")}})}getAllTags(){this._HelperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}getAllcategories(){this._CategoryService.getAllCategories(1e3,1,"").subscribe({next:t=>{console.log(t),this.categories=t.data}})}test(t){console.log(t)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(m.H),e.Y36(h.W),e.Y36(d.uw),e.Y36(v),e.Y36(T._W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipes"]],decls:45,vars:8,consts:[["id","recipes"],[1,"header-page","container"],[1,"row","align-items-center"],[1,"col-8","text-white"],[1,"mb-0"],[1,"col-4","text-end"],["src","../../../../assets/images/profile 1.svg","alt",""],[1,"mt-3","d-flex","align-items-center","justify-content-between"],[1,"w-75"],[1,"bg-main","btn","text-white",3,"routerLink"],[1,"mt-3","row","align-items-center","justify-content-between"],[1,"col-6","d-flex"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-magnifying-glass"],["type","text","name","email","placeholder","Search by Name","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"col-3"],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"table","table-striped"],[1,"text-center"],[4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","pageIndex","page"],[1,"w-25","text-center"],["alt","",1,"w-25",3,"src"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["color","primary"],["menu","matMenu"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["src","../../../../assets/images/delete-img.svg","alt",""]],template:function(n,o){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4"),e._uU(5,"Recipes "),e.TgZ(6,"span"),e._uU(7,"item"),e.qZA()(),e.TgZ(8,"p",4),e._uU(9,"You can now add your items that any user can order it from the Application and you can edit."),e.qZA()(),e.TgZ(10,"div",5),e._UZ(11,"img",6),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"h6"),e._uU(15,"Recipes Table Details"),e.qZA(),e.TgZ(16,"p"),e._uU(17,"You can check all details"),e.qZA()(),e.TgZ(18,"div")(19,"button",9),e._uU(20,"Add New Recipe"),e.qZA()()(),e.TgZ(21,"div",10)(22,"div",11)(23,"div",12)(24,"span",13),e._UZ(25,"i",14),e.qZA(),e.TgZ(26,"input",15),e.NdJ("ngModelChange",function(l){return o.searchKey=l})("keyup.enter",function(){return o.getRecipes()}),e.qZA()()(),e.TgZ(27,"div",16)(28,"mat-form-field",17)(29,"mat-label"),e._uU(30,"Tags"),e.qZA(),e.TgZ(31,"mat-select",18),e.NdJ("ngModelChange",function(l){return o.tagId=l})("selectionChange",function(){return o.getRecipes()}),e.TgZ(32,"mat-option"),e._uU(33,"All"),e.qZA(),e.YNc(34,S,2,2,"mat-option",19),e.qZA()()(),e.TgZ(35,"div",16)(36,"mat-form-field",17)(37,"mat-label"),e._uU(38,"Categories"),e.qZA(),e.TgZ(39,"mat-select",18),e.NdJ("ngModelChange",function(l){return o.categoryId=l})("selectionChange",function(){return o.getRecipes()}),e.TgZ(40,"mat-option"),e._uU(41,"All"),e.qZA(),e.YNc(42,N,2,2,"mat-option",19),e.qZA()()()(),e.YNc(43,w,24,5,"div",20),e.YNc(44,z,5,0,"div",20),e.qZA()),2&n&&(e.xp6(19),e.Q6J("routerLink","/dashboard/admin/recipes/add"),e.xp6(7),e.Q6J("ngModel",o.searchKey),e.xp6(5),e.Q6J("ngModel",o.tagId),e.xp6(3),e.Q6J("ngForOf",o.tags),e.xp6(5),e.Q6J("ngModel",o.categoryId),e.xp6(3),e.Q6J("ngForOf",o.categories),e.xp6(1),e.Q6J("ngIf",o.tableData.length>0),e.xp6(1),e.Q6J("ngIf",0==o.tableData.length))},dependencies:[p.sg,p.O5,g.rH,_.KE,_.hX,A.gD,x.ey,r.Fj,r.JJ,r.On,U.NW,I.RK,f.VK,f.OP,f.p6,q.Hw,p.uU]})}return i})();var Z=a(4426);function M(i,c){if(1&i&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Y(i,c){if(1&i&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Q(i,c){1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._uU(1,"Drag and Drop image "),e.TgZ(2,"span",24),e._uU(3,"Choose image "),e.qZA(),e._uU(4,"to upload"),e.qZA())}function E(i,c){if(1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"img",25),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgSrc,e.LSH)}}function P(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",26),e.NdJ("removed",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onRemove(s))}),e.TgZ(1,"ngx-dropzone-label"),e._uU(2),e.qZA()()}if(2&i){const t=c.$implicit;e.Q6J("removable",!0)("file",t),e.xp6(2),e.hij("(",t.type,")")}}const H=function(){return["/dashboard/admin/recipes"]};let b=(()=>{class i{constructor(t,n,o,s,l,$,B){this._ActivatedRoute=t,this._router=n,this._CategoryService=o,this._HelperService=s,this.dialog=l,this._RecipesService=$,this._ToastrService=B,this.tags=[],this.categories=[],this.recipeId=0,this.imgUrl="https:upskilling-egypt.com/",this.files=[],this.recipeForm=new r.cw({name:new r.NI(null,[r.kI.maxLength(25)]),description:new r.NI(null,[r.kI.maxLength(50)]),price:new r.NI(null,[r.kI.maxLength(5)]),tagId:new r.NI(null),imagePath:new r.NI(null,[]),categoriesIds:new r.NI(null)}),console.log(this.recipeId),this.recipeId=t.snapshot.params.id}ngOnInit(){this.getAllTags(),this.getAllcategories(),this.recipeId&&this.getRecipeById(this.recipeId)}onSelect(t){console.log(t),this.imgSrc=t.addedFiles[0],this.recipeForm.get("imagePath")?.setValue(this.imgSrc),this.files.push(...t.addedFiles)}onRemove(t){console.log(t),this.files.splice(this.files.indexOf(t),1)}getAllTags(){this._HelperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}getAllcategories(){this._CategoryService.getAllCategories(1e3,1,"").subscribe({next:t=>{console.log(t),this.categories=t.data}})}onSubmit(t){console.log(t);let n=new FormData;n.append("name",t.value.name),n.append("description",t.value.description),n.append("price",t.value.price),n.append("tagId",t.value.tagId),n.append("categoriesIds",t.value.categoriesIds),n.append("imagePath",this.imgSrc,this.imgSrc.name),this.recipeId?this._RecipesService.onEditRecipe(this.recipeId,n).subscribe({next:o=>{console.log(o)},error:()=>{},complete:()=>{this._ToastrService.success("Edited Successfuly"),this._router.navigate(["/dashboard/admin/recipes"])}}):this._RecipesService.onAddRecipe(n).subscribe({next:o=>{console.log(o)},error:()=>{},complete:()=>{this._ToastrService.success("Added Successfuly"),this._router.navigate(["/dashboard/admin/recipes"])}})}getRecipeById(t){this._RecipesService.getRecipeById(t).subscribe({next:n=>{console.log(n),this.recipeDate=n},error:()=>{},complete:()=>{[...this.recipeDate.category].map(s=>s.id),this.imgSrc=this.imgUrl+this.recipeDate.imagePath,this.recipeForm.patchValue({name:this.recipeDate.name,description:this.recipeDate.description,price:this.recipeDate.price,tagId:this.recipeDate.tag.id,imagePath:this.recipeDate.imagePath,categoriesIds:this.recipeDate.category.map(s=>s.id)})}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(g.gz),e.Y36(g.F0),e.Y36(m.H),e.Y36(h.W),e.Y36(d.uw),e.Y36(v),e.Y36(T._W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-edit-recipe"]],decls:44,vars:9,consts:[["id","fillRecipe"],[1,"row","align-items-center"],[1,"text-center"],[1,"text-main"],[3,"formGroup","ngSubmit"],[1,"container"],[1,"row","py-5"],[1,"col-9","mx-auto"],[1,"input-group","mb-3"],["formControlName","name","type","text","name","name","placeholder","Recipe Name","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["formControlName","description","type","text","name","description","placeholder","Description","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["formControlName","price","type","number","name","price","placeholder","Price","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["appearance","outline",1,"w-100"],["formControlName","tagId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","categoriesIds","multiple",""],[1,"col-12"],[3,"multiple","change"],[4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],[1,"btn","btn-outline-success","mx-2",3,"routerLink"],[1,"bg-success","text-white","btn","px-4"],[3,"value"],[1,"text-success","fw-bold"],["alt","",1,"w-25",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed"]],template:function(n,o){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4,"Fill the "),e.TgZ(5,"span",3),e._uU(6,"Recipes!"),e.qZA()(),e.TgZ(7,"p"),e._uU(8,"you can now fill the meals easily using the table and form , click here and sill it with the table !"),e.qZA()()()(),e.TgZ(9,"section")(10,"form",4),e.NdJ("ngSubmit",function(){return o.onSubmit(o.recipeForm)}),e.TgZ(11,"div",5)(12,"div",6)(13,"div",7)(14,"div",8),e._UZ(15,"input",9),e.qZA(),e.TgZ(16,"div",8),e._UZ(17,"textarea",10),e.qZA(),e.TgZ(18,"div",8),e._UZ(19,"input",11),e.qZA(),e.TgZ(20,"div")(21,"mat-form-field",12)(22,"mat-label"),e._uU(23,"Tags"),e.qZA(),e.TgZ(24,"mat-select",13),e.YNc(25,M,2,2,"mat-option",14),e.qZA()()(),e.TgZ(26,"div")(27,"mat-form-field",12)(28,"mat-label"),e._uU(29,"Categories"),e.qZA(),e.TgZ(30,"mat-select",15),e.YNc(31,Y,2,2,"mat-option",14),e.qZA()()(),e.TgZ(32,"div",16)(33,"ngx-dropzone",17),e.NdJ("change",function(l){return o.onSelect(l)}),e.YNc(34,Q,5,0,"ngx-dropzone-label",18),e.YNc(35,E,2,1,"ngx-dropzone-label",18),e.YNc(36,P,3,3,"ngx-dropzone-image-preview",19),e.qZA()(),e.TgZ(37,"div"),e._UZ(38,"hr"),e.TgZ(39,"div",20)(40,"button",21),e._uU(41,"Cancel"),e.qZA(),e.TgZ(42,"button",22),e._uU(43,"Save"),e.qZA()()()()()()()()),2&n&&(e.xp6(10),e.Q6J("formGroup",o.recipeForm),e.xp6(15),e.Q6J("ngForOf",o.tags),e.xp6(6),e.Q6J("ngForOf",o.categories),e.xp6(2),e.Q6J("multiple",!1),e.xp6(1),e.Q6J("ngIf",!o.imgSrc),e.xp6(1),e.Q6J("ngIf",o.imgSrc),e.xp6(1),e.Q6J("ngForOf",o.files),e.xp6(4),e.Q6J("routerLink",e.DdM(8,H)))},dependencies:[p.sg,p.O5,g.rH,Z._f,Z.NP,Z.sv,_.KE,_.hX,A.gD,x.ey,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u],styles:["#fillRecipe[_ngcontent-%COMP%]{background-color:#f0ffef;border-radius:15px;margin-top:1rem;padding:1rem}"]})}return i})();const L=[{path:"",component:O},{path:"add",component:b},{path:"edit/:id",component:b}];let k=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(L),g.Bz]})}return i})();var K=a(3358);let j=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[p.ez,k,K.m]})}return i})()},1739:(C,u,a)=>{a.d(u,{W:()=>d});var p=a(5879),g=a(9862);let d=(()=>{class e{constructor(m){this._HttpClient=m}getTags(){return this._HttpClient.get("tag")}static#e=this.\u0275fac=function(h){return new(h||e)(p.LFG(g.eN))};static#t=this.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()}}]);